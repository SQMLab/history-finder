
# History Finder



---

## Prerequisites

Ensure the following tools and frameworks are installed before running the project:

* [Git](https://git-scm.com/)
* [Java 21](https://www.oracle.com/ca-en/java/technologies/downloads)

---

## Web UI

### Steps to Run the Web Interface
1. **Download the JAR file**:
    - [Download history-finder.jar](https://github.com/SQMLab/history-finder/releases/download/release-0.0.4/history-finder-0.0.4.jar)
2. **Run the JAR file**:
   ```bash
   java -jar history-finder.jar
   ```
3. **Access the Web Interface**:
    - Open your browser and navigate to: [http://localhost:8080](http://localhost:8080)

---

## Command Line Interface (CLI)

### Steps to Use the CLI
1. **Download the JAR file**:
    - [Download history-finder.jar](https://github.com/SQMLab/history-finder/releases/download/release-0.0.4/history-finder-0.0.4.jar)
2. **Run Commands**:
   ```bash
   java -jar history-finder.jar <OPTIONS>
   ```

### Available Options

| **Option**                     | **Description**                                                                             |
|--------------------------------|---------------------------------------------------------------------------------------------|
| `-command <name>`              | Specify the command                                                                         |
|                                | `commit-trace-detail`: Generate method history with a tool.                                 |
|                                | `commit-trace-shaw`: Compare method history generated by different tools.                   |
| `-tracer-name <tool>`          | Specify the tool.                                                                           |
|                                | `historyFinder`                                                                             |
|                                | `codeShovel`                                                                                |
|                                | `codeTracker`                                                                               |
|                                | `intelliJ` (Limited to pre-generated methods only)                                          |
|                                | `gitLineRange` (Equivalent to `git log <commit> --no-merges -L<start>,<end>:<file>`)        |
|                                | `gitFuncName` (Equivalent to `git log <commit> --no-merges -L:<funcname>:<file>`)           |
| `-clone-directory <dir>`       | Directory where repositories will be cloned (e.g., `../academic`).                          |
| `-repository-url <url>`        | URL of the GitHub repository (e.g., `https://github.com/checkstyle/checkstyle.git`).        |
| `-start-commit <hash>`         | Start commit hash (e.g., `HEAD` or `119fd4fb33bef9f5c66fc950396669af842c21a3`).             |
| `-file <path>`                 | Path to the Java file (e.g., `src/main/java/com/puppycrawl/tools/checkstyle/Checker.java`). |
| `-method-name <name>`         | Name of the method (e.g., `fireErrors`).                                                    |
| `-start-line <number>`         | Start line number of the method (e.g., `384`).                                              |
| `-end-line <number>`           | End line number of the method (e.g., `399`).                                                |
| `-output-file <path>`          | Path to store the output file (e.g., `./cache/output/trace-detail.json`).                   |

---

### Examples

#### **Generate Method History with a Tool**
```bash
java -jar history-finder.jar \
    -command commit-trace-detail \
    -tracer-name historyFinder \
    -clone-directory ../academic \
    -repository-url https://github.com/checkstyle/checkstyle.git \
    -start-commit 119fd4fb33bef9f5c66fc950396669af842c21a3 \
    -file src/main/java/com/puppycrawl/tools/checkstyle/Checker.java \
    -method-name fireErrors \
    -start-line 384 \
    -end-line 399 \
    -output-file ../cache/output/trace-detail.json

```

#### **Compare Method History for Different Tools**
```bash
java -jar history-finder.jar \
    -command commit-trace-shaw \
    -clone-directory ../academic \
    -repository-url https://github.com/checkstyle/checkstyle.git \
    -start-commit 119fd4fb33bef9f5c66fc950396669af842c21a3 \
    -file src/main/java/com/puppycrawl/tools/checkstyle/Checker.java \
    -method-name fireErrors \
    -start-line 384 \
    -end-line 399 \
    -output-file ../cache/output/commit-trace-shaw.csv

```

---

## Advanced Configuration

### Application Configuration
To customize the application, create or download the configuration file ([application.yml](https://github.com/shaifulcse/HistoryFinder/releases/download/release-1.06/application.yml)) and place it in the same directory as `history-finder.jar`.

| **Configuration Key**          | **Default Value**  | **Description**                          |
|---------------------------------|--------------------|------------------------------------------|
| `SERVER_PORT`                   | `8080`             | Port on which the server runs.           |
| `CMD_SHELL`                     | `sh`               | Default shell for git command execution. |
| `REPOSITORY_CLONE_DIRECTORY`    | `../../repository` | Root directory for cloning repositories. |

### Git Log Function Name Command

To enable the `git log <commit> --no-merges -L:<funcname>:<file>` command, configure Git attributes as follows:

#### Run the following commands:
   ```bash
   touch ~/.gitattributes
   echo "*.java diff=java" >> ~/.gitattributes
   git config --global core.attributesfile ~/.gitattributes
   ```

---

## Notes
- Ensure the required tools (Git, Java) are installed before running the application.
- For assistance or bug reports, open an issue in the repository.

---

## Support and Contributions

Contributions are welcome! Feel free to fork the repository, submit a pull request, or open an issue to suggest improvements.

---

[//]: # (## License)

